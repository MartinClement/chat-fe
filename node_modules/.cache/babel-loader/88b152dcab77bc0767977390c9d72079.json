{"ast":null,"code":"import _classCallCheck from \"/Users/clement/web/chat-ws/chat/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/clement/web/chat-ws/chat/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/clement/web/chat-ws/chat/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/clement/web/chat-ws/chat/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/clement/web/chat-ws/chat/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/clement/web/chat-ws/chat/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/clement/web/chat-ws/chat/src/components/Chat.js\";\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  background-color: #424242;\\n  color: #fff;\\n  width: 100%;\\n  height: 40px;\\n  box-sizing: border-box;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  flex-grow: 1;\\n  position: relative;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    color: \", \"\\n    font-weight: 600;\\n    font-size: 18px;\\n    position: absolute;\\n    bottom: 10px;\\n    left: 10px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100vw;\\n  height: 100vh;\\n  background: #424242;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  font-size: 16px;\\n  color: #fff;\\n  font-family: Arial, sans-serif;\\n\\n  & > * {\\n    padding: 10px;\\n    border: 3px solid #fff;\\n    border-radius: 3px;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport styled from 'styled-components';\nvar Wrapper = styled.div(_templateObject());\nvar Status = styled.div(_templateObject2(), function (p) {\n  return p.status === 'disconnected' ? 'red' : p.status === 'connecting' ? 'orange' : 'green';\n});\nvar Messages = styled.div(_templateObject3());\nvar Input = styled.input(_templateObject4());\n\nvar Chat =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Chat, _React$Component);\n\n  function Chat() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Chat)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this._connection = null;\n    _this.state = {\n      status: 'connecting',\n      error: '',\n      messages: [],\n      message: '',\n      userName: '',\n      userColor: ''\n    };\n\n    _this.componentWillMount = function () {\n      var connection = _this.props.connection;\n      _this._connection = connection;\n      _this._connection.onopen = _this.handleConnectionOpen;\n      _this._connection.onerror = _this.handleConnectionError;\n    };\n\n    _this.handleConnectionOpen = function () {\n      console.log('connection opened');\n\n      _this.setState({\n        status: 'connected'\n      });\n    };\n\n    _this.handleConnectionError = function (err) {\n      console.log('connection error', err);\n\n      _this.setState({\n        status: 'disconnected',\n        error: 'Connection failed'\n      });\n    };\n\n    _this.handleInputChange = function (e) {\n      _this.setState({\n        message: e.target.value\n      });\n    };\n\n    _this.handleSubmit = function () {};\n\n    return _this;\n  }\n\n  _createClass(Chat, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          userName = _this$state.userName,\n          userColor = _this$state.userColor,\n          message = _this$state.message,\n          messages = _this$state.messages,\n          status = _this$state.status,\n          error = _this$state.error;\n      return React.createElement(Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Messages, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(Status, {\n        status: status,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, status, error !== '' && \" : \".concat(error))), React.createElement(Input, {\n        type: \"text\",\n        value: message,\n        onChange: function onChange(e) {\n          return _this2.handleInputChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Chat;\n}(React.Component);\n\nexport default Chat;","map":{"version":3,"sources":["/Users/clement/web/chat-ws/chat/src/components/Chat.js"],"names":["React","styled","Wrapper","div","Status","p","status","Messages","Input","input","Chat","_connection","state","error","messages","message","userName","userColor","componentWillMount","connection","props","onopen","handleConnectionOpen","onerror","handleConnectionError","console","log","setState","err","handleInputChange","e","target","value","handleSubmit","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,IAAMC,OAAO,GAAGD,MAAM,CAACE,GAAV,mBAAb;AAkBA,IAAMC,MAAM,GAAGH,MAAM,CAACE,GAAV,qBACC,UAAAE,CAAC;AAAA,SACRA,CAAC,CAACC,MAAF,KAAa,cAAb,GAA8B,KAA9B,GAAsCD,CAAC,CAACC,MAAF,KAAa,YAAb,GAA4B,QAA5B,GAAuC,OADrE;AAAA,CADF,CAAZ;AAUA,IAAMC,QAAQ,GAAGN,MAAM,CAACE,GAAV,oBAAd;AAKA,IAAMK,KAAK,GAAGP,MAAM,CAACQ,KAAV,oBAAX;;IAQMC,I;;;;;;;;;;;;;;;;;UACJC,W,GAAc,I;UACdC,K,GAAQ;AACNN,MAAAA,MAAM,EAAE,YADF;AAENO,MAAAA,KAAK,EAAE,EAFD;AAGNC,MAAAA,QAAQ,EAAE,EAHJ;AAINC,MAAAA,OAAO,EAAE,EAJH;AAKNC,MAAAA,QAAQ,EAAE,EALJ;AAMNC,MAAAA,SAAS,EAAE;AANL,K;;UASRC,kB,GAAqB,YAAM;AAAA,UACjBC,UADiB,GACF,MAAKC,KADH,CACjBD,UADiB;AAEzB,YAAKR,WAAL,GAAmBQ,UAAnB;AACA,YAAKR,WAAL,CAAiBU,MAAjB,GAA0B,MAAKC,oBAA/B;AACA,YAAKX,WAAL,CAAiBY,OAAjB,GAA2B,MAAKC,qBAAhC;AACD,K;;UAEDF,oB,GAAuB,YAAM;AAC3BG,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;;AACA,YAAKC,QAAL,CAAc;AAAErB,QAAAA,MAAM,EAAE;AAAV,OAAd;AACD,K;;UAEDkB,qB,GAAwB,UAAAI,GAAG,EAAI;AAC7BH,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCE,GAAhC;;AACA,YAAKD,QAAL,CAAc;AACZrB,QAAAA,MAAM,EAAE,cADI;AAEZO,QAAAA,KAAK,EAAE;AAFK,OAAd;AAID,K;;UAEDgB,iB,GAAoB,UAAAC,CAAC,EAAI;AACvB,YAAKH,QAAL,CAAc;AAAEZ,QAAAA,OAAO,EAAEe,CAAC,CAACC,MAAF,CAASC;AAApB,OAAd;AACD,K;;UAEDC,Y,GAAe,YAAM,CAAE,C;;;;;;;6BAEd;AAAA;;AAAA,wBAC2D,KAAKrB,KADhE;AAAA,UACCI,QADD,eACCA,QADD;AAAA,UACWC,SADX,eACWA,SADX;AAAA,UACsBF,OADtB,eACsBA,OADtB;AAAA,UAC+BD,QAD/B,eAC+BA,QAD/B;AAAA,UACyCR,MADzC,eACyCA,MADzC;AAAA,UACiDO,KADjD,eACiDA,KADjD;AAEP,aACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,MAAM,EAAEP,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGA,MADH,EAEGO,KAAK,KAAK,EAAV,iBAAsBA,KAAtB,CAFH,CADF,CADF,EAOE,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,KAAK,EAAEE,OAA1B;AAAmC,QAAA,QAAQ,EAAE,kBAAAe,CAAC;AAAA,iBAAI,MAAI,CAACD,iBAAL,CAAuBC,CAAvB,CAAJ;AAAA,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,CADF;AAWD;;;;EAlDgB9B,KAAK,CAACkC,S;;AAqDzB,eAAexB,IAAf","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\n\nconst Wrapper = styled.div`\n  width: 100vw;\n  height: 100vh;\n  background: #424242;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  font-size: 16px;\n  color: #fff;\n  font-family: Arial, sans-serif;\n\n  & > * {\n    padding: 10px;\n    border: 3px solid #fff;\n    border-radius: 3px;\n  }\n`\n\nconst Status = styled.div`\n    color: ${p =>\n      p.status === 'disconnected' ? 'red' : p.status === 'connecting' ? 'orange' : 'green'}\n    font-weight: 600;\n    font-size: 18px;\n    position: absolute;\n    bottom: 10px;\n    left: 10px;\n`\n\nconst Messages = styled.div`\n  flex-grow: 1;\n  position: relative;\n`\n\nconst Input = styled.input`\n  background-color: #424242;\n  color: #fff;\n  width: 100%;\n  height: 40px;\n  box-sizing: border-box;\n`\n\nclass Chat extends React.Component {\n  _connection = null\n  state = {\n    status: 'connecting',\n    error: '',\n    messages: [],\n    message: '',\n    userName: '',\n    userColor: '',\n  }\n\n  componentWillMount = () => {\n    const { connection } = this.props\n    this._connection = connection\n    this._connection.onopen = this.handleConnectionOpen\n    this._connection.onerror = this.handleConnectionError\n  }\n\n  handleConnectionOpen = () => {\n    console.log('connection opened')\n    this.setState({ status: 'connected' })\n  }\n\n  handleConnectionError = err => {\n    console.log('connection error', err)\n    this.setState({\n      status: 'disconnected',\n      error: 'Connection failed',\n    })\n  }\n\n  handleInputChange = e => {\n    this.setState({ message: e.target.value })\n  }\n\n  handleSubmit = () => {}\n\n  render() {\n    const { userName, userColor, message, messages, status, error } = this.state\n    return (\n      <Wrapper>\n        <Messages>\n          <Status status={status}>\n            {status}\n            {error !== '' && ` : ${error}`}\n          </Status>\n        </Messages>\n        <Input type=\"text\" value={message} onChange={e => this.handleInputChange(e)} />\n      </Wrapper>\n    )\n  }\n}\n\nexport default Chat\n"]},"metadata":{},"sourceType":"module"}